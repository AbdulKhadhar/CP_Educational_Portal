{% extends 'base.html' %}
{% load static %}

{% block title %}Manage Quizzes{% endblock %}
{% block page_title %}Manage Your Quizzes{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-3">
        <div class="col text-end">
            <a href="#" class="btn btn-success" title="Click to select a section and create a quiz for it.">
                <i class="fas fa-plus-circle"></i> Create New Quiz
            </a>
        </div>
    </div>

    <ul class="nav nav-tabs" id="quizTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="active-tab" data-bs-toggle="tab" data-bs-target="#active" type="button" role="tab">
                Active ({{ active_quizzes.count }})
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="upcoming-tab" data-bs-toggle="tab" data-bs-target="#upcoming" type="button" role="tab">
                Upcoming ({{ upcoming_quizzes.count }})
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="past-tab" data-bs-toggle="tab" data-bs-target="#past" type="button" role="tab">
                Past ({{ past_quizzes.count }})
            </button>
        </li>
    </ul>

    <div class="tab-content" id="quizTabsContent">
        
        <div class="tab-pane fade show active" id="active" role="tabpanel">
            {% if active_quizzes %}
                {% for quiz in active_quizzes %}
                    {% include 'quizzes/_quiz_management_card.html' with quiz=quiz status='Active' %}
                {% endfor %}
            {% else %}
                <p class="p-3 text-muted">No quizzes are currently active and available to students.</p>
            {% endif %}
        </div>

        <div class="tab-pane fade" id="upcoming" role="tabpanel">
            {% if upcoming_quizzes %}
                {% for quiz in upcoming_quizzes %}
                    {% include 'quizzes/_quiz_management_card.html' with quiz=quiz status='Upcoming' %}
                {% endfor %}
            {% else %}
                <p class="p-3 text-muted">No quizzes are currently scheduled for the future.</p>
            {% endif %}
        </div>

        <div class="tab-pane fade" id="past" role="tabpanel">
            {% if past_quizzes %}
                {% for quiz in past_quizzes %}
                    {% include 'quizzes/_quiz_management_card.html' with quiz=quiz status='Finished' %}
                {% endfor %}
            {% else %}
                <p class="p-3 text-muted">No quizzes have closed yet.</p>
            {% endif %}
        </div>

    </div>
</div>
{% endblock %}